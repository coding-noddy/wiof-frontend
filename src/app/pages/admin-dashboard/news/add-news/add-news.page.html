<mat-toolbar color="primary">
  <div class="flex items-center">
    <button mat-icon-button routerLink="/admin-dashboard">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>
  <span *ngIf="!isEditMode">{{ pageContent.addNewsTitle }}</span>
  <span *ngIf="isEditMode">{{ pageContent.editNewsTitle }}</span>
  <span class="flex-1"></span>
  <div class="flex gap-2">
    <button mat-raised-button color="accent" (click)="onSubmit()">
      {{ pageContent.saveNewsLabel }}
    </button>
    <button
      mat-flat-button
      color="warn"
      routerLink="/admin-dashboard/manage-news"
    >
      {{ pageContent.cancelLabel }}
    </button>
  </div>
</mat-toolbar>

<div class="p-6">
  <form [formGroup]="addNewsForm">
    <div class="container mx-auto">
      <div class="flex flex-wrap">
        <div class="w-full">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.headlineLabel}}</mat-label>
            <input matInput formControlName="headline">
          </mat-form-field>
        </div>

        <div class="w-full md:w-1/3">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.categoryLabel}}</mat-label>
            <mat-select formControlName="category">
              <mat-option
                [value]="category"
                *ngFor="let category of categories"
                >{{ category }}</mat-option
              >
            </mat-select>
          </mat-form-field>
        </div>

        <div class="w-full md:w-1/3">
          <mat-form-field appearance="standard" class="date-picker-field">
            <mat-label> {{ pageContent.newsDateLabel }}</mat-label>
            <input
              matInput
              [matDatepicker]="newsDatePicker"
              formControlName="date"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="newsDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #newsDatePicker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="w-full md:w-1/3">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.mediaTypeLabel}}</mat-label>
            <mat-select formControlName="mediaType" #mediaType>
              <mat-option [value]="'image'">Image</mat-option>
              <mat-option [value]="'video'">Video</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div
          *ngIf="mediaType.value && mediaType.value === 'image'"
          class="w-full"
          >
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.selectImageLabel}}</mat-label>
            <input
              matInput
              type="file"
              accept="image/*"
              (change)="onFileSelected($event)"
              formControlName="image"
            >
          </mat-form-field>
          <div class="mt-4" *ngIf="imageToDisplay">
            <img [src]="imageToDisplay" class="max-w-xs rounded shadow">
          </div>
        </div>

        <div
          *ngIf="mediaType.value && mediaType.value === 'video'"
          class="w-full"
          >
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.mediaLinkLabel}}</mat-label>
            <input matInput formControlName="mediaLink">
          </mat-form-field>
        </div>

        <div class="w-full">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{pageContent.newsSourceLabel}}</mat-label>
            <input matInput formControlName="newsSource">
          </mat-form-field>
        </div>

        <div class="w-full">
          <label class="block text-sm font-medium text-gray-700 mb-2">{{pageContent.contentLabel}}</label>
          <quill-editor formControlName="content"></quill-editor>
        </div>
      </div>
    </div>
  </form>
</div>
