<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/admin-dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>Add Poll</ion-title>
    <ion-buttons slot="end">
      <ion-button color="success" fill="solid" size="large" (click)="onSubmit()"
        >Save</ion-button
      >
      <ion-button
        color="medium"
        fill="clear"
        size="large"
        routerLink="/admin-dashboard"
        >Cancel</ion-button
      >
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="addPollForm" (submit)="onSubmit()">
    <ion-grid>
      <ion-row>
        <ion-col size-xs="12" size-lg="6">
          <ion-item>
            <ion-label position="floating">Poll Question</ion-label>
            <ion-textarea formControlName="question"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-lg="6">
          <ion-row formArrayName="options">
            <ion-col
              size-xs="12"
              size-md="6"
              *ngFor="let option of getOptionControls().controls; let i = index"
            >
              <ion-item>
                <ion-label position="floating">Option {{ i + 1 }}</ion-label>
                <ion-input [formControlName]="i"></ion-input>
                <span
                  class="input-close-icon"
                  title="Remove this option"
                  (click)="removeOption(i)"
                  ><ion-icon name="close"></ion-icon
                ></span>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size-xs="12" size-md="3">
              <ion-button (click)="addOption()"
                >Add Option <ion-icon name="add"></ion-icon>
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
      <hr />
      <ion-row>
        <ion-col size-xs="12" size-md="6" size-lg="3">
          <mat-form-field appearance="fill">
            <mat-label>Publish End Date</mat-label>
            <input
              matInput
              [matDatepicker]="publishStartDatePicker"
              formControlName="publishStartDate"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="publishStartDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #publishStartDatePicker></mat-datepicker>
            <p>
              <ion-note
                >*Start date of accepting polls for this question</ion-note
              >
            </p>
          </mat-form-field>
        </ion-col>
        <ion-col size-xs="12" size-md="6" size-lg="3">
          <mat-form-field appearance="fill">
            <mat-label>Publish End Date</mat-label>
            <input
              matInput
              [matDatepicker]="publishEndDatePicker"
              formControlName="publishEndDate"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="publishEndDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #publishEndDatePicker></mat-datepicker>
            <p>
              <ion-note
                >*Last date of accepting polls for this question</ion-note
              >
            </p>
          </mat-form-field>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
