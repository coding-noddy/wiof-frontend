<mat-card class="wiof-calendar-wrapper" *ngIf="EnvDays">
  <mat-card-header class="wiof-env-calender-header wiof-home">
    <mat-card-title class="title-text">
      <span>Environment Calender</span>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content class="wiof-env-calender-content background">
    <div class="container mx-auto wiof-calendar-container">
      <div class="flex flex-wrap">
        <div class="w-full month-header">
          <h1>{{ displayMonth }}</h1>
          <p>{{ displayDay }}</p>
        </div>
      </div>
      <div class="flex flex-wrap weekday">
        <div class="flex-1">Sunday</div>
        <div class="flex-1">Monday</div>
        <div class="flex-1">Tuesday</div>
        <div class="flex-1">Wednesday</div>
        <div class="flex-1">Thursday</div>
        <div class="flex-1">Friday</div>
        <div class="flex-1">Saturday</div>
      </div>
      <div class="flex flex-wrap">
        <div
          *ngFor="let day of days"
          [class]="day.class"
          [ngClass]="{
            'occasion-day-container': day.occasion[0] != null
          }"
        >
          <div
            [ngClass]="{
              'occasion-day': day.occasion[0] != null,
              'no-occasion-day': day.occasion[0] == null
            }"
            title="{{ day.occasion[day.selectedOccasionIndex]?.name }}"
          >
            <h1
              [ngClass]="{
                'occasion-day-date': day.occasion[0] != null,
                'no-occasion-day-date': day.occasion[0] == null
              }"
              (click)="openOccasionDialog(day)"
            >
              {{ day.day }}
            </h1>
            <img
              class="occasion-day-image"
              *ngIf="day.occasion[day.selectedOccasionIndex]"
              [src]="day.occasion[day.selectedOccasionIndex].image | async"
              (click)="openOccasionDialog(day)"
              [alt]="
                'Image for occasion ' +
                day.occasion[day.selectedOccasionIndex]?.name
              "
            />
            <div *ngIf="day.occasion && day.occasion.length > 1">
              <button
                class="next-button"
                [disabled]="day.selectedOccasionIndex === 0"
                (click)="prevOccasion(day)"
              >
                <mat-icon>chevron_left</mat-icon>
              </button>

              <button
                class="prev-button"
                [disabled]="
                  day.selectedOccasionIndex === day.occasion.length - 1
                "
                (click)="nextOccasion(day)"
              >
                <mat-icon>chevron_right</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="wiof-env-calendar-dialog-container" *ngIf="openDialog">
      <app-env-cal-dialog
        [occasionDetails]="occasionForDialog"
        (close)="closeDialog()"
      ></app-env-cal-dialog>
    </div>
  </mat-card-content>
</mat-card>
